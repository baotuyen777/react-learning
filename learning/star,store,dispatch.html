<html>

<head>
    <title></title>
    <script src="redux.min.js"></script>
</head>

<body>
    <div>
        <p>
            Cliked: <span id="value">0</span>times
            <button id='decrement'>Decrement</button>
            <button id="incrementAsync">IncrementAsync</button>
        </p>
    </div>
    <script>
        //step 1.2
        console.group('Redux.createStore(REDUCER)');
        var store =Redux.createStore(counter);
        console.groupEnd('REdux.createStore(REDUCER)');
        //end step 1.2
        //step 1.3
        var valueE1=document.getElementById('value');
       function render(){
           console.group('render()')
           console.log('STATE == store.getState() == ',store.getState())
           valueE1.innerHTML=store.getState().count;
           console.groupEnd('render()');
       }
       render();
       store.subscribe(render);
       //end 1.3
       //step 2.2
       function counter(currentState,action){ //REDUCER
           var DEFAULT_STATE ={count:0,sum:0};
           console.group('REDUCER')
           var nextState =Object.assign({},currentState);
           console.log('current STATE == ',currentState)
           if(currentState == undefined){
               nextState =DEFAULT_STATE;
               console.log('next STATE == ',nextState)
               console.groupEnd('REDUCER')
               return nextState;
           }
           switch(action.type){
               case 'DECREMENT':
               nextState.count=currentState.count-1;
               console.log('next STATE ==',nextState);
               console.groupEnd('REDUCER')
               return nextState;
               default:
               return nextState;
           }
       }
       //end 2.2
       document.getElementById('decrement').addEventListener('click',function(){
        //    valueE1.innerHTML=valueE1.innerHTML -1;
        var action ={type:'DECREMENT'};
        console.log('');
        console.group('store.dispatch(action)')
        console.info("ACTION == ",action);
        store.dispatch(action);
        console.groupEnd("store.dispatch(action)")
        store.dispatch(action);
       });
       document.getElementById('incrementAsync').addEventListener('click',function(){
           setTimeout(function(){
                valueE1.innerHTML= parseInt(valueE1.innerHTML)+1;
           },1000);
           
       })
    </script>
</body>

</html>